"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.firstInstall=void 0;const configuration_1=require("../../configuration"),helpers_1=require("../../helpers"),views_1=require("../../views");function firstInstall(e){var r;!1===configuration_1.serverConfig.configFileExist()&&("/CREATE"===e.request.url.toUpperCase()?(r=JSON.parse(JSON.stringify(e.request.body,null,2)),configuration_1.serverConfig.readConfigFile(JSON.stringify({admin:{name:"admin",port:8029,pg:{host:r.host,port:5432,user:r.username,password:r.password,database:"postgres",retry:2},apiVersion:"1.1",date_format:"DD/MM/YYYY hh:mi:ss",webSite:"no web site",nb_page:200,forceHttps:!1,alias:[""],extensions:[],highPrecision:!1,canDrop:!1,logFile:""}},null,2)),configuration_1.serverConfig.init(),configuration_1.serverConfig.addConfig({name:r.service,port:8029,pg:{host:r.servicehost,port:5432,user:r.serviceusername,password:r.servicepassword,database:r.service,retry:2},apiVersion:"1.1",date_format:"DD/MM/YYYY hh:mi:ss",webSite:"",nb_page:200,forceHttps:!1,extensions:["base"],highPrecision:!1,canDrop:!1,logFile:""})):(r=new views_1.First(e,{login:!1,url:e.request.url}),e.type=helpers_1.returnFormats.html.type,e.body=r.toString()))}exports.firstInstall=firstInstall;