"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeSql=void 0;const configuration_1=require("../../configuration"),log_1=require("../../log"),helpers_1=require("../../helpers"),executeSqlOne=async(e,r)=>(log_1.log.query(r),new Promise(async function(o,n){await configuration_1.serverConfig.connection(e.name).unsafe(r).then(e=>{o(e)}).catch(e=>{(0,helpers_1.isTest)()||23505!=+e.code||log_1.log.queryError(r,e),n(e)})})),executeSqlMulti=async(e,r)=>(log_1.log.query(r),new Promise(async function(o,n){await configuration_1.serverConfig.connection(e.name).begin(o=>r.map(e=>o.unsafe(e))).then(e=>{o(e)}).catch(e=>{(0,helpers_1.isTest)()||23505!=+e.code||log_1.log.queryError(r,e),n(e)})})),executeSql=async(e,o)=>("string"==typeof o?executeSqlOne:executeSqlMulti)(e,o);exports.executeSql=executeSql;