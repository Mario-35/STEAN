"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Users=void 0;const common_1=require("./common"),logger_1=require("../../logger"),configuration_1=require("../../configuration"),helpers_1=require("../../helpers"),messages_1=require("../../messages/"),enums_1=require("../../enums"),constants_1=require("../../constants"),helpers_2=require("../helpers"),models_1=require("../../models");class Users extends common_1.Common{constructor(e){super(e)}async getAll(){var e;if(!0===this.ctx.user?.PDCUAS[enums_1.EnumUserRights.SuperAdmin]||!0===this.ctx.user?.PDCUAS[enums_1.EnumUserRights.Admin])return e=await(0,helpers_2.executeSqlValues)(configuration_1.serverConfig.getConfig(constants_1.ADMIN),`SELECT ${models_1.models.getSelectColumnList(models_1.models.DBAdmin(configuration_1.serverConfig.getConfig(constants_1.ADMIN)).Users)} FROM "user" ORDER BY "id"`),this.formatReturnResult({body:(0,helpers_1.hidePassword)(e)});this.ctx.throw(401,{code:401,detail:messages_1.errors[401]})}async post(e){if(e)return this.formatReturnResult({body:await configuration_1.serverConfig.addConfig(e)})}}exports.Users=Users;