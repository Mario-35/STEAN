"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Configs=void 0;const common_1=require("./common"),logger_1=require("../../logger"),configuration_1=require("../../configuration"),helpers_1=require("../../helpers"),authentication_1=require("../../authentication"),helpers_2=require("../helpers");class Configs extends common_1.Common{constructor(e){super(e)}async getAll(){return(0,authentication_1.ensureAuthenticated)(this.ctx)?this.formatReturnResult({body:(0,helpers_1.hidePassword)(configuration_1.serverConfig.getConfigs().map(e=>({[e]:{...configuration_1.serverConfig.getConfig(e)}})))}):this.formatReturnResult({body:(0,helpers_1.hidePassword)(configuration_1.serverConfig.getConfig(this.ctx.config.name))})}async getSingle(e){return(0,authentication_1.ensureAuthenticated)(this.ctx)||this.ctx.throw(401),this.formatReturnResult({body:(0,helpers_1.hideKeysInJson)(configuration_1.serverConfig.getConfig("string"==typeof e?e:this.ctx.config.name),["entities"])})}async post(e){return e&&e.create&&e.create.name?this.formatReturnResult({body:await(0,helpers_2.createService)(e,this.ctx)}):e&&e.add&&e.add.name?this.formatReturnResult({body:await(0,helpers_2.addToService)(this.ctx,e)}):((0,authentication_1.ensureAuthenticated)(this.ctx)||this.ctx.throw(401),e?this.formatReturnResult({body:await configuration_1.serverConfig.addConfig(e)}):void 0)}async delete(e){}}exports.Configs=Configs;